/*! LovelyIS - v0.1.0 - Carlos Vega*/
(function(e){e.belowthefold=function(t,o){var r=e(window).height()+e(window).scrollTop();return e(t).offset().top-o.threshold>=r},e.abovethetop=function(t,o){var r=e(window).scrollTop();return r>=e(t).offset().top+e(t).height()-o.threshold},e.rightofscreen=function(t,o){var r=e(window).width()+e(window).scrollLeft();return e(t).offset().left-o.threshold>=r},e.leftofscreen=function(t,o){var r=e(window).scrollLeft();return r>=e(t).offset().left+e(t).width()-o.threshold},e.inviewport=function(t,o){return!(e.rightofscreen(t,o)||e.leftofscreen(t,o)||e.belowthefold(t,o)||e.abovethetop(t,o))},e.extend(e.expr[":"],{"below-the-fold":function(t){return e.belowthefold(t,{threshold:0})},"above-the-top":function(t){return e.abovethetop(t,{threshold:0})},"left-of-screen":function(t){return e.leftofscreen(t,{threshold:0})},"right-of-screen":function(t){return e.rightofscreen(t,{threshold:0})},"in-viewport":function(t){return e.inviewport(t,{threshold:0})}})})(jQuery),function(e,t,o,r){var n=function(){function n(){return 0+o(t).height()-m.pixelsFromNavToBottom+o(m.extendable.selectors.footer).height()}function a(){for(var e=0;m.pageBreakPxLocation.length>e;e++){var t=m.extendable.binder.scrollTop()>=m.pageBreakPxLocation[e];if(t){var o=e+1===m.pageBreakPxLocation.length,n=m.extendable.binder.scrollTop()<m.pageBreakPxLocation[e+1];if(o||n){var a=m.state.currentViewPage!==m.pageBreakList[e];if(a)return i(m.pageBreakList[e]),r}}}}function i(t,o){if(t){m.state.currentViewPage=t;var r=h(t,o,e.location.pathname);e.history.replaceState(null,null,r)}}function l(){o(m.extendable.selectors.item).on("click",function(e){setTimeout(function(){var t=m.extendable.usingData?o(e.currentTarget).data(m.extendable.dataIdAttr):o(e.currentTarget).attr("id"),r=m.pageBreakPxLocation[m.state.currentViewPage]<o(e.currentTarget).offset().top+o(e.currentTarget).height()?m.state.currentViewPage+1:m.state.currentViewPage;i(r,t)},0)})}function s(){if(m.ready&&!m.paused&&(a(),m.extendable.updateWhileScroll)){var e=m.extendable.usingData?o(m.extendable.selectors.item+":in-viewport").first().data(m.extendable.dataIdAttr):o(m.extendable.selectors.item+":in-viewport").first().attr("id");i(m.state.currentViewPage,e)}}function c(){m.ready&&(u(),m.pageBreakPxLocation[m.pageBreakPxLocation.length]=n(),m.state.currPage++,m.pageBreakList[m.pageBreakList.length]=m.state.currPage,l())}function d(e,t){return m.extendable.usingData?o("*[data-"+e+'="'+t+'"]'):o("#"+t)}function u(){o(m.extendable.selectors.item).off("click"),g("Detaching click listeners to avoid multiple bindings.")}function f(e){e&&(m.paused=!0,setTimeout(function(){o("html, body").animate({scrollTop:e.offset().top},m.extendable.animationDuration,function(){m.paused=!1})},m.extendable.scrollTimeout))}function p(e){var t=location.search.substr(location.search.indexOf("?")+1),o="";t=t.split("&");for(var r=0;t.length>r;r++)temp=t[r].split("="),[temp[0]]==e&&(o=temp[1]);return o}function h(e,t,o){var r=location.search.substr(location.search.indexOf("?")+1),n=o+"?",a=!0,i=!0,r=r.split("&");if(""!=r[0])for(var l=0;r.length>l;l++)temp=r[l].split("="),""!=temp&&("page"==[temp[0]]&&(temp[1]=e,a=!1),"itemId"==[temp[0]]&&t&&(temp[1]=t,i=!1),n+=(0!=l?"&":"")+temp[0]+"="+temp[1]);return a&&(n+=(""!=r[0]?"&":"")+"page="+e),i&&t?n+=(""!=r[0]||a?"&":"")+"itemId="+t:n}function g(e){m.extendable.devMode&&console.log("Lovely Infinite Scrolling: "+e+" {Running in dev mode}")}function x(a){if(o.extend(m.extendable,a),!(0>=o(m.extendable.selectors.footer).length)){var i=p("itemId");i!==r&&""!=i&&f(d(m.extendable.dataIdAttr,i)),m.pixelsFromNavToBottom=o(t).height()-o(m.extendable.selectors.footer).last().offset().top,m.state.currentViewPage=p("page")||1,m.state.currPage=p("page")||1,m.pageBreakPxLocation=[0,n()],m.pageBreakList=[m.state.currPage],l(),m.ready=!0&&e.history&&e.history.pushState,g(m.ready?"Ready to roll :D":"Ooops, seems like this browser doesn't support the newest stuff D:")}}var m={ready:!1,state:{currentViewPage:1,currPage:1},paused:!1,pageBreakPxLocation:[],pageBreakList:[],pixelsFromNavToBottom:r,extendable:{updateWhileScroll:!1,binder:o(e),usingData:!1,selectors:{item:"li",container:"div",footer:"li.navigation"},devMode:!0,dataIdAttr:"id",scrollTimeout:2500,animationDuration:2e3}};return _expose={duringScroll:s,afterAppend:c,init:x}}();e.LovelyIS=n}(window,document,jQuery);