/*! LovelyIS - v0.1.1 - Carlos Vega*/
(function(e){e.belowthefold=function(t,n){var o=e(window).height()+e(window).scrollTop();return e(t).offset().top-n.threshold>=o},e.abovethetop=function(t,n){var o=e(window).scrollTop();return o>=e(t).offset().top+e(t).height()-n.threshold},e.rightofscreen=function(t,n){var o=e(window).width()+e(window).scrollLeft();return e(t).offset().left-n.threshold>=o},e.leftofscreen=function(t,n){var o=e(window).scrollLeft();return o>=e(t).offset().left+e(t).width()-n.threshold},e.inviewport=function(t,n){return!(e.rightofscreen(t,n)||e.leftofscreen(t,n)||e.belowthefold(t,n)||e.abovethetop(t,n))},e.extend(e.expr[":"],{"below-the-fold":function(t){return e.belowthefold(t,{threshold:0})},"above-the-top":function(t){return e.abovethetop(t,{threshold:0})},"left-of-screen":function(t){return e.leftofscreen(t,{threshold:0})},"right-of-screen":function(t){return e.rightofscreen(t,{threshold:0})},"in-viewport":function(t){return e.inviewport(t,{threshold:0})}})})(jQuery),function(e,t,n,o){var r=function(){function r(){return 0+n(t).height()-x.pixelsFromNavToBottom+n(x.extendable.selectors.footer).height()}function a(){for(var e=0;x.pageBreakPxLocation.length>e;e++){var t=x.extendable.binder.scrollTop()>=x.pageBreakPxLocation[e];if(t){var n=e+1===x.pageBreakPxLocation.length,r=x.extendable.binder.scrollTop()<x.pageBreakPxLocation[e+1];if(n||r){var a=x.state.currentViewPage!==x.pageBreakList[e];if(a)return i(x.pageBreakList[e]),o}}}}function i(t,n){if(t){x.state.currentViewPage=t;var o=h(t,n,e.location.pathname);e.history.replaceState(null,null,o)}}function l(){n(x.extendable.selectors.item).on("click",function(e){setTimeout(function(){var t=x.extendable.usingData?n(e.currentTarget).data(x.extendable.dataIdAttr):n(e.currentTarget).attr("id"),o=x.pageBreakPxLocation[x.state.currentViewPage]<n(e.currentTarget).offset().top+n(e.currentTarget).height()?x.state.currentViewPage+1:x.state.currentViewPage;i(o,t)},0)})}function s(){if(x.ready&&!x.paused&&x.extendable.enabled&&(a(),x.extendable.updateWhileScroll)){var e=x.extendable.usingData?n(x.extendable.selectors.item+":in-viewport").first().data(x.extendable.dataIdAttr):n(x.extendable.selectors.item+":in-viewport").first().attr("id");i(x.state.currentViewPage,e)}}function c(){x.ready&&x.extendable.enabled&&(u(),x.pageBreakPxLocation[x.pageBreakPxLocation.length]=r(),x.state.currPage++,x.pageBreakList[x.pageBreakList.length]=x.state.currPage,l())}function d(e,t){return x.extendable.usingData?n("*[data-"+e+'="'+t+'"]'):n("#"+t)}function u(){n(x.extendable.selectors.item).off("click"),g("Detaching click listeners to avoid multiple bindings.")}function f(e){e&&(x.paused=!0,setTimeout(function(){n("html, body").animate({scrollTop:e.offset().top},x.extendable.animationDuration,function(){x.paused=!1})},x.extendable.scrollTimeout))}function p(e){var t=location.search.substr(location.search.indexOf("?")+1),n="";t=t.split("&");for(var o=0;t.length>o;o++)temp=t[o].split("="),[temp[0]]==e&&(n=temp[1]);return n}function h(e,t,n){var o=location.search.substr(location.search.indexOf("?")+1),r=n+"?",a=!0,i=!0,o=o.split("&");if(""!=o[0])for(var l=0;o.length>l;l++)temp=o[l].split("="),""!=temp&&("page"==[temp[0]]&&(temp[1]=e,a=!1),"itemId"==[temp[0]]&&t&&(temp[1]=t,i=!1),r+=(0!=l?"&":"")+temp[0]+"="+temp[1]);return a&&(r+=(""!=o[0]?"&":"")+"page="+e),i&&t?r+=(""!=o[0]||a?"&":"")+"itemId="+t:r}function g(e){x.extendable.devMode&&console.log("Lovely Infinite Scrolling: "+e+" {Running in dev mode}")}function b(a){if(n.extend(x.extendable,a),!(0>=n(x.extendable.selectors.footer).length)&&x.extendable.enabled){var i=p("itemId");i!==o&&""!=i&&f(d(x.extendable.dataIdAttr,i)),x.pixelsFromNavToBottom=n(t).height()-n(x.extendable.selectors.footer).last().offset().top,x.state.currentViewPage=p("page")||1,x.state.currPage=p("page")||1,x.pageBreakPxLocation=[0,r()],x.pageBreakList=[x.state.currPage],l(),x.ready=!0&&e.history&&e.history.pushState,g(x.ready?"Ready to roll :D":"Ooops, seems like this browser doesn't support the newest stuff D:")}}var x={ready:!1,state:{currentViewPage:1,currPage:1},paused:!1,pageBreakPxLocation:[],pageBreakList:[],pixelsFromNavToBottom:o,extendable:{updateWhileScroll:!1,binder:n(e),usingData:!1,selectors:{item:"li",container:"div",footer:"li.navigation"},devMode:!0,dataIdAttr:"id",scrollTimeout:2500,animationDuration:2e3,enabled:!0}};return _expose={duringScroll:s,afterAppend:c,init:b}}();e.LovelyIS=r}(window,document,jQuery);