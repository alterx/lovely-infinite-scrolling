/*! LovelyIS - v0.1.1 - Carlos Vega*/
(function(e){e.belowthefold=function(t,o){var r=e(window).height()+e(window).scrollTop();return e(t).offset().top-o.threshold>=r},e.abovethetop=function(t,o){var r=e(window).scrollTop();return r>=e(t).offset().top+e(t).height()-o.threshold},e.rightofscreen=function(t,o){var r=e(window).width()+e(window).scrollLeft();return e(t).offset().left-o.threshold>=r},e.leftofscreen=function(t,o){var r=e(window).scrollLeft();return r>=e(t).offset().left+e(t).width()-o.threshold},e.inviewport=function(t,o){return!(e.rightofscreen(t,o)||e.leftofscreen(t,o)||e.belowthefold(t,o)||e.abovethetop(t,o))},e.extend(e.expr[":"],{"below-the-fold":function(t){return e.belowthefold(t,{threshold:0})},"above-the-top":function(t){return e.abovethetop(t,{threshold:0})},"left-of-screen":function(t){return e.leftofscreen(t,{threshold:0})},"right-of-screen":function(t){return e.rightofscreen(t,{threshold:0})},"in-viewport":function(t){return e.inviewport(t,{threshold:0})}})})(jQuery),function(e,t,o,r){var n=function(){function n(){return 0+o(t).height()-x.pixelsFromNavToBottom+o(x.extendable.selectors.footer).height()}function a(){for(var e=0;x.pageBreakPxLocation.length>e;e++){var t=x.extendable.binder.scrollTop()>=x.pageBreakPxLocation[e];if(t){var o=e+1===x.pageBreakPxLocation.length,n=x.extendable.binder.scrollTop()<x.pageBreakPxLocation[e+1];if(o||n){var a=x.state.currentViewPage!==x.pageBreakList[e];if(a)return i(x.pageBreakList[e]),r}}}}function i(t,o){if(t){x.state.currentViewPage=t;var r=h(t,o,e.location.pathname);e.history.replaceState(null,null,r)}}function l(){o(x.extendable.selectors.item).on("click",function(e){setTimeout(function(){var t=x.extendable.usingData?o(e.currentTarget).data(x.extendable.dataIdAttr):o(e.currentTarget).attr("id"),r=x.pageBreakPxLocation[x.state.currentViewPage]<o(e.currentTarget).offset().top+o(e.currentTarget).height()?x.state.currentViewPage+1:x.state.currentViewPage;i(r,t)},0)})}function s(){if(x.ready&&!x.paused&&x.enabled&&(a(),x.extendable.updateWhileScroll)){var e=x.extendable.usingData?o(x.extendable.selectors.item+":in-viewport").first().data(x.extendable.dataIdAttr):o(x.extendable.selectors.item+":in-viewport").first().attr("id");i(x.state.currentViewPage,e)}}function c(){x.ready&&x.enabled&&(u(),x.pageBreakPxLocation[x.pageBreakPxLocation.length]=n(),x.state.currPage++,x.pageBreakList[x.pageBreakList.length]=x.state.currPage,l())}function d(e,t){return x.extendable.usingData?o("*[data-"+e+'="'+t+'"]'):o("#"+t)}function u(){o(x.extendable.selectors.item).off("click"),g("Detaching click listeners to avoid multiple bindings.")}function f(e){e&&(x.paused=!0,setTimeout(function(){o("html, body").animate({scrollTop:e.offset().top},x.extendable.animationDuration,function(){x.paused=!1})},x.extendable.scrollTimeout))}function p(e){var t=location.search.substr(location.search.indexOf("?")+1),o="";t=t.split("&");for(var r=0;t.length>r;r++)temp=t[r].split("="),[temp[0]]==e&&(o=temp[1]);return o}function h(e,t,o){var r=location.search.substr(location.search.indexOf("?")+1),n=o+"?",a=!0,i=!0,r=r.split("&");if(""!=r[0])for(var l=0;r.length>l;l++)temp=r[l].split("="),""!=temp&&("page"==[temp[0]]&&(temp[1]=e,a=!1),"itemId"==[temp[0]]&&t&&(temp[1]=t,i=!1),n+=(0!=l?"&":"")+temp[0]+"="+temp[1]);return a&&(n+=(""!=r[0]?"&":"")+"page="+e),i&&t?n+=(""!=r[0]||a?"&":"")+"itemId="+t:n}function g(e){x.extendable.devMode&&console.log("Lovely Infinite Scrolling: "+e+" {Running in dev mode}")}function b(a){if(o.extend(x.extendable,a),!(0>=o(x.extendable.selectors.footer).length)&&x.enabled){var i=p("itemId");i!==r&&""!=i&&f(d(x.extendable.dataIdAttr,i)),x.pixelsFromNavToBottom=o(t).height()-o(x.extendable.selectors.footer).last().offset().top,x.state.currentViewPage=p("page")||1,x.state.currPage=p("page")||1,x.pageBreakPxLocation=[0,n()],x.pageBreakList=[x.state.currPage],l(),x.ready=!0&&e.history&&e.history.pushState,g(x.ready?"Ready to roll :D":"Ooops, seems like this browser doesn't support the newest stuff D:")}}var x={ready:!1,state:{currentViewPage:1,currPage:1},paused:!1,pageBreakPxLocation:[],pageBreakList:[],pixelsFromNavToBottom:r,extendable:{updateWhileScroll:!1,binder:o(e),usingData:!1,selectors:{item:"li",container:"div",footer:"li.navigation"},devMode:!0,dataIdAttr:"id",scrollTimeout:2500,animationDuration:2e3,enabled:!0}};return _expose={duringScroll:s,afterAppend:c,init:b}}();e.LovelyIS=n}(window,document,jQuery);