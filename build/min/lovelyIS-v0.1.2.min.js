/*! LovelyIS - v0.1.2 - Carlos Vega*/
(function(e){e.belowthefold=function(t,n){var r=e(window).height()+e(window).scrollTop();return e(t).offset().top-n.threshold>=r},e.abovethetop=function(t,n){var r=e(window).scrollTop();return r>=e(t).offset().top+e(t).height()-n.threshold},e.rightofscreen=function(t,n){var r=e(window).width()+e(window).scrollLeft();return e(t).offset().left-n.threshold>=r},e.leftofscreen=function(t,n){var r=e(window).scrollLeft();return r>=e(t).offset().left+e(t).width()-n.threshold},e.inviewport=function(t,n){return!(e.rightofscreen(t,n)||e.leftofscreen(t,n)||e.belowthefold(t,n)||e.abovethetop(t,n))},e.extend(e.expr[":"],{"below-the-fold":function(t){return e.belowthefold(t,{threshold:0})},"above-the-top":function(t){return e.abovethetop(t,{threshold:0})},"left-of-screen":function(t){return e.leftofscreen(t,{threshold:0})},"right-of-screen":function(t){return e.rightofscreen(t,{threshold:0})},"in-viewport":function(t){return e.inviewport(t,{threshold:0})}})})(jQuery),function(e,t,n,r){var a=function(){function a(){return 0+n(t).height()-m.pixelsFromNavToBottom+n(m.extendable.selectors.footer).height()}function o(){for(var e=0;m.pageBreakPxLocation.length>e;e++){var t=m.extendable.binder.scrollTop()>=m.pageBreakPxLocation[e];if(t){var n=e+1===m.pageBreakPxLocation.length,a=m.extendable.binder.scrollTop()<m.pageBreakPxLocation[e+1];if(n||a){var o=m.state.currentViewPage!==m.pageBreakList[e];if(o)return i(m.pageBreakList[e]),r}}}}function i(t,n){if(t){m.state.currentViewPage=t;var r=b(t,n,e.location.pathname);e.history.replaceState(null,null,r)}}function l(){d()&&n(m.extendable.selectors.item).on("click",function(e){setTimeout(function(){var t=m.extendable.usingData?n(e.currentTarget).data(m.extendable.dataIdAttr):n(e.currentTarget).attr("id"),r=m.pageBreakPxLocation[m.state.currentViewPage]<n(e.currentTarget).offset().top+n(e.currentTarget).height()?m.state.currentViewPage+1:m.state.currentViewPage;i(r,t)},0)})}function s(){if(m.ready&&!m.paused&&m.extendable.enabled&&(o(),m.extendable.updateWhileScroll)){var e=m.extendable.usingData?n(m.extendable.selectors.item+":in-viewport").first().data(m.extendable.dataIdAttr):n(m.extendable.selectors.item+":in-viewport").first().attr("id");i(m.state.currentViewPage,e)}}function c(){m.ready&&m.extendable.enabled&&u()&&(p(),m.pageBreakPxLocation[m.pageBreakPxLocation.length]=a(),m.state.currPage++,m.pageBreakList[m.pageBreakList.length]=m.state.currPage,l())}function d(){var t=e.location.path;return m.extendable.fullTracking[t]?!0:!1}function u(){var t=e.location.path;return m.extendable.partialTracking[t]?!0:!1}function f(e,t){return m.extendable.usingData?n("*[data-"+e+'="'+t+'"]'):n("#"+t)}function p(){n(m.extendable.selectors.item).off("click"),x("Detaching click listeners to avoid multiple bindings.")}function h(e){e&&(m.paused=!0,setTimeout(function(){n("html, body").animate({scrollTop:e.offset().top},m.extendable.animationDuration,function(){m.paused=!1})},m.extendable.scrollTimeout))}function g(e){var t=location.search.substr(location.search.indexOf("?")+1),n="";t=t.split("&");for(var r=0;t.length>r;r++)temp=t[r].split("="),[temp[0]]==e&&(n=temp[1]);return n}function b(e,t,n){var r=location.search.substr(location.search.indexOf("?")+1),a=n+"?",o=!0,i=!0,r=r.split("&");if(""!=r[0])for(var l=0;r.length>l;l++)temp=r[l].split("="),""!=temp&&("page"==[temp[0]]&&(temp[1]=e,o=!1),"itemId"==[temp[0]]&&t&&(temp[1]=t,i=!1),a+=(0!=l?"&":"")+temp[0]+"="+temp[1]);return o&&(a+=(""!=r[0]?"&":"")+"page="+e),i&&t?a+=(""!=r[0]||o?"&":"")+"itemId="+t:a}function x(e){m.extendable.devMode&&console.log("Lovely Infinite Scrolling: "+e+" {Running in dev mode}")}function v(o){if(n.extend(m.extendable,o),!(0>=n(m.extendable.selectors.footer).length)&&m.extendable.enabled){var i=g("itemId");i!==r&&""!=i&&h(f(m.extendable.dataIdAttr,i)),m.pixelsFromNavToBottom=n(t).height()-n(m.extendable.selectors.footer).last().offset().top,m.state.currentViewPage=g("page")||1,m.state.currPage=g("page")||1,m.pageBreakPxLocation=[0,a()],m.pageBreakList=[m.state.currPage],l(),m.ready=!0&&e.history&&e.history.pushState,x(m.ready?"Ready to roll :D":"Ooops, seems like this browser doesn't support the newest stuff D:")}}var m={ready:!1,state:{currentViewPage:1,currPage:1},paused:!1,pageBreakPxLocation:[],pageBreakList:[],pixelsFromNavToBottom:r,extendable:{updateWhileScroll:!1,binder:n(e),usingData:!1,selectors:{item:"li",container:"div",footer:"li.navigation"},devMode:!0,dataIdAttr:"id",scrollTimeout:2500,animationDuration:2e3,enabled:!0,paths:[],partialTracking:{},fullTracking:{}}};return _expose={duringScroll:s,afterAppend:c,init:v}}();e.LovelyIS=a}(window,document,jQuery);